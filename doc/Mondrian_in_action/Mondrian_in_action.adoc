= Mondrian in Action
:hardbreaks:
:toc:
:sectnums:

== Beyond reporting: bussiness analitycs


=== The need for bussines analytics.
* OLAP: Online analytical processing is a technology that makes business
data available with enough structure for business users to easily explore data and discover important data relationships without having to understand database query languages or the organization of a company’s operational databases.
* Mondrian is an open source OLAP engine that provides access to data in a way
that’s intuitive to users. As an engine, Mondrian can be run in a web container, such as
Tomcat or JBoss, or be embedded as part of an application. Mondrian only requires
an optional configuration, a schema defining the logical structure of the data, and a
database populated with data. Mondrian works with most databases that support Java
database connections.

=== Replacing static reports with online analytical processing(OLAP).
=== OLAP to the rescue.


==== Mondrian let users drive analytics.

*   Mondrian supports user-driven analysis. Users are able to do their own analysis
without a lot of help from administrators or report writers.

==== Mondrian is low cost, low risk solution.
*   Mondrian is a low-cost, low-risk choice. Mondrian is open source and can be
downloaded for free. Mondrian also comes bundled with a number of analysis
tools and suites that make it easy to install and start using.

image::images/Figure1.9.png[]




.  A business user decides to query some data using a number of different front
ends, typically a thin-client interface, such as Pentaho Analyzer.

. The interface creates a Multidimensional Expressions (MDX) query using
either a web service call or a direct API call. MDX is a standardized general
query language used for analysis and supported by most analytics engines. The
advantage of MDX is that it simplifies the calls to the database while also being
extremely powerful. It’s also a common dialect that can be used no matter what
database the data is stored in. Some user interfaces will allow users to directly
enter or modify queries in MDX, allowing users who are comfortable with MDX
syntax to perform more complex queries and use the many functions available
in MDX.

. Mondrian uses a logical schema, organized into cubes of dimensions (attributes
about the data, such as date and location) and measures (the actual data facts,
such as cost, inventory level, and the like). The schema also provides features
for performance optimization and security. Mondrian uses this schema to
retrieve the data either from an in-memory cache or by generating optimized
database calls. Mondrian automatically creates correct SQL for a wide number
of databases.

. Mondrian generates SQL queries based on the metadata description and makes
a database request.

. The database returns a result set of data to Mondrian.

. Mondrian returns the data to the user interface, using a standard API that is understood by the visualization tool.

. Finally, the data is formatted graphically for the user in a tabular format that’s easy to understand and manipulate.

==== Mondrian is fast.
*   Mondrian is fast. It has a variety of optimization techniques that allow users to
perform analysis at the speed of thought using interactive tools.

** Agregates.
** Caching.

==== Mondrian is secure.
*   Mondrian has built-in security capabilities, making it ideal for organizations
with sensitive data.


==== Mondrian is based on open standarts.


*   Mondrian is based on open standards. It runs on a large variety of application servers and works with most major databases. This means Mondrian won’t lock you into a proprietary solution.

* In particular, Mondrian supports the following standards:

**   olap4j: An open standard for OLAP via Java

**   XMLA: A standard for system-to-system interaction based on SOAP

**   XML: A standard markup language that lets you create Mondrian schemas with a simple text editor

=== Sumary.

== Mondrian a firt look.

=== Mondrian role in analytics.



.Some products that use Mondrian
[width="90%",frame="topbot",options="heade"]
|=======
|Name |Description
|Pentaho Analyzer |Pentaho’s enterprise analysis UI that provides interactive analysis with tables and graphs.
|Pentaho Reporting |A reporting tool that creates pixel-perfect reports using Mondrian data.
|Community Dashboard Framework|A popular open source dashboard framework for creating interactive dashboards.
|Saiku| A free open source analytics tool that provides interactive analysis with tables and graphs. Saiku is available as a Pentaho plugin or a standalone product.
|=======


=== Running and using Mondrian.


.Pentaho comes in two flavors: 
* Community Edition (CE) 
* Enterprise Edition(EE): requires the purchase of licenses but comes
with additional features and support.

==== Getting and running the software.
==== Navigating and viewing reports.
==== Interactive analytics.
==== MDX analitics with saiku.

* Saiku lets you go beyond drag and drop and perform advanced analysis using
MDX queries. 
* Multidimensional Expressions (MDX) is a query language for OLAP
that allows you to use advanced techniques, such ratio to reported, parallel period comparisons, period over period growth, traffic lighting, and so forth.

=== Multidimensional modeling.


Mondrian, as an OLAP engine,
presents data multidimensionally: the content are data facts that the business analysts want to know about, such as sales and inventory, and the dimensions are attributes about the data for analysis, such as warehouse, geography, customer demographics, and so on.

==== Sample report.
image::images/Figure2.10.png[]

[source,]
----

SELECT {[Measures].[Units],
        [Measures].[Store Sales]} ON COLUMNS,
   Crossjoin([Time].[Year].Members,
             [Customer].[Education].Members) ON ROWS
----


image::images/Figure2.10.1.png[]
==== Modeling bussines questions.


IMPORTANT: EVOLVING A SCHEMA Mondrian makes it easy to evolve a schema by adding attributes, dimensions, measures, and calculations when you need them. The dimensional model can be gleaned by listening to the business user’s question.



.Each of the key concepts will likely turn into a cube, an attribute, a dimension, or a measure. 
* Attributes correspond to nouns, and attributes that are related (because
they describe the same entity in the business) are grouped into dimensions. 
* Quantifiable values are measures. 
* Cubes describe business processes, so they tend to appear as verbs. If the business user says “compare based on ...” or “break down by ...”, the next noun will likely be something that will become an attribute in the dimensional model.



.In summary:

* Measures are the quantities you use to analyze a business process.
* Attributes are how you slice the set of measurements into regions that you can compare.
* Dimensions are convenient collections of attributes.
* Cubes contain the measures, attributes, and dimensions necessary to answer a particular business question.

=== Getting and ordering the data.

image::images/Figure2.11.png[]

==== The data warehouse: physical storing the data.

* Mondrian is a *relational OLAP (ROLAP)* engine, meaning that the data is stored in a relational database and Mondrian translates MDX queries into SQL queries for the particular RDBMS you use for storage. 

* star schemas: The star schema is simplified by combining related data into single, denormalized tables.footnoteref:[For example, the City-State, State-Country, Country-Territory tables are all combined into a Geography table. This means that there are multiple copies of a state to country mapping, increasing data storage and possibly requiring the update of multiple records should a mapping change (for example, if a country splits into multiple countries). In chapter 3, we’ll talk about ways to avoid the redundancy, but the choice
is generally to pay for additional storage to get faster analysis. The time of a business analyst is usually worth much more than the cost of additional storage space.]

==== Examining the Adventure Works data.
==== Populating the data.

* The data in the warehouse is populated via a process known as extract, transform, and load (ETL).
* An additional benefit of moving data from transactional systems to analytics systems is that the multiple data sources can be combined into a single data warehouse.
* Pentaho also provides an open source tool called *Kettle* (a.k.a. Pentaho Data Integration, or *PDI*) that makes ETL much easier. 
* Kettle provides a graphical interface, called *Spoon*, that allows users to graphically create sequences of steps to manipulate data. 


== Creating the Data Mart.
=== Structuring data for analytics.
==== Characteristics of analytics systems.
==== Data Architecture for analytics.
==== Star schemas.
==== Comparing star schemas with 3NF.
==== Star schemas benefits.
=== Additional star schema modeling techniques.
==== Slowly Changing Dimensions (SCD's).
==== Time Dimensions.
==== SnowFlake design.
==== Degenerate and combination/junk dimensions.
=== Sumary.
== Multidimensional modeling: making analytics data accesible.
=== A simple schema.
==== Schema element. 
==== Cube element.
==== Attribute element.
==== Dimension element.
==== Measure element.
==== PhysicalSchema element.
=== Anatomy of a schema.
==== XML schema files.
==== Structure of schema.
==== Schema versioning and upgrading.
=== Dimensions, hierachies and levels.
==== Hierarchies and levels.
==== Time dimension. 
==== Attribute hierarchies.
==== The measures dimension.
=== Summary.
== How schemas grow.
=== Schema evolution.
==== Multiple cubes in a schema.
==== Shared dimensions.
==== Conformed dimensions. 
==== Using a dimension twice in the same cube.
==== Measures across multiple fact tables.
==== Smart evolution: multiples cubes versus single cubes.
==== Other schema evolution patterns.
=== Alternativa ways to store dimensions.
==== Star dimensions.
==== Snowflake dimensions.
==== Degenerate dimensions.
=== Advanced hierarchy structures.
==== Parent-child hierarchies.
==== Ragged hierarchies.
=== Calculations.
==== Bucketing attributes.
==== Calculated members.
=== Summary.
== Security data.
=== Use of roles.
==== What's a role.
==== Declaring roles in the mondrian schema.
==== Enforcement of roles.
=== Security grants.
==== Schema grants.
==== Cube grants.
==== Dimension and hierarchy grants.
==== Member grants.
==== Measure grants.
=== Summary. 
== Maximizing Mondrian performance.
=== Figuring out where the problem are.
==== Performance improvement process.
==== Preparing for performance  analysis and establishing current performance.
=== Tunning the database.
=== Aggregate tables.
==== Creating aggregate tables.
==== Declaring an aggregate table.
==== Which aggregates should create.
=== Caching.
==== Types of caches.
==== External segment cache.
=== Priming the cache.
=== Flushing the cache.
==== Flushing the schema cache.
==== Flushing specific cubes.
==== Flushing specific regions of the cache.
==== Summary.
== Dinamyc security.
=== Preparing for dynamic security.
==== Creating an action sequence.
==== Configuring and running the action sequence.
=== Restricting data usion a dynamic schema processor.
==== Modifying the schema to support a DSP.
==== Example of DSP.
==== Configuring the DSP.
=== Restricting data using dynamic role modification.
==== Preparing the schema.
==== Custom MDX connection.
==== Custom delegate role and custom hierarchy access.
==== Configuring the custom MDX connection.
=== Deciding which security approach to use.
=== Summary.
== Working with Mondrian and Pentaho.
=== Pentaho Analyzer.
==== Overview of Pentaho Analyzer.
==== Using analyzer for analysis.
==== Charting with analyzer.
==== Special schema annotations for using Analyzer.
=== Saiku.
=== Community DashBoard Framework.
==== Creating a CDF dashboard.
==== Using community data access.
=== Pentaho report dessigner.
==== Creating an OLAP data source.
==== Using parameters.
==== PRD and the dynamic schema processor.
=== Pentaho Data Integration.
=== Summary.
== Developing with Mondrian.
=== Calling Mondrian from a thin client.
==== XML for a Analysis (XMLA).
==== Configuring Mondrian as an XMLA web service.
==== Calling XMLA services with Ajax.
==== XMLA for JavaScript (xmla4js).
=== Calling Mondrian from Java Application.
==== Creating connections via olap4j.
==== Queryng data.
=== Summary.
== Advanced analytics.
=== Advanced analytics in Mondrian with MDX.
==== Running MDX querys.
==== Ratios and growth.
==== Time-specific MDX.
==== Advanced MDX.
=== What-if analysis.
=== Stadistics and machine learning.
==== R.
==== Weka.
=== Big Data.
==== Analytics databases.
==== Hadoop and Hive.
==== NoSQL systems and Hadoop.
=== Summary.
== Appendix A: Installing and running Mondrian.
== Appendix B: Online resources.
== Appendix C: Schema shorcuts.
